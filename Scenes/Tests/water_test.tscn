[gd_scene load_steps=14 format=3 uid="uid://c7j36bvqcqrso"]

[ext_resource type="Script" uid="uid://8560q4g3mplt" path="res://Custom/DensityTarget.cs" id="1_8adiu"]
[ext_resource type="Script" uid="uid://c4dvp1scoivp3" path="res://assets/Water.cs" id="2_g538k"]
[ext_resource type="Shader" uid="uid://cf6cwynfn2fdn" path="res://assets/Shaders/sum_of_sines_water.gdshader" id="3_kxn0a"]
[ext_resource type="Shader" uid="uid://ydttxe06jcko" path="res://assets/Shaders/jonswap_water.gdshader" id="4_g538k"]
[ext_resource type="Texture2D" uid="uid://bbjd3i76mo64e" path="res://assets/Textures/Epic_BlueSunset_EquiRect_flat.png" id="4_ho8b5"]

[sub_resource type="Image" id="Image_g538k"]
data = {
"data": PackedByteArray(168, 75, 226, 63, 84, 143, 197, 63, 0, 0, 0, 0, 73, 13, 199, 63, 222, 189, 176, 63, 0, 0, 0, 0, 34, 103, 172, 63, 196, 253, 190, 63, 0, 0, 0, 0, 243, 102, 191, 63, 84, 206, 253, 63, 0, 0, 0, 0, 160, 202, 223, 63, 220, 57, 133, 63, 0, 0, 0, 0, 228, 2, 199, 63, 204, 174, 165, 63, 0, 0, 0, 0, 238, 58, 130, 63, 196, 205, 216, 63, 0, 0, 0, 0, 186, 209, 236, 63, 233, 129, 178, 63, 0, 0, 0, 0, 224, 62, 162, 63, 230, 101, 245, 63, 0, 0, 0, 0, 92, 10, 170, 63, 224, 48, 135, 63, 0, 0, 0, 0, 229, 187, 246, 63, 219, 250, 177, 63, 0, 0, 0, 0, 96, 77, 241, 63, 78, 57, 240, 63, 0, 0, 0, 0, 210, 123, 136, 63, 60, 183, 152, 63, 0, 0, 0, 0, 200, 73, 182, 63, 162, 179, 227, 63, 0, 0, 0, 0, 110, 76, 209, 63, 113, 191, 165, 63, 0, 0, 0, 0, 98, 117, 222, 63, 231, 104, 238, 63, 0, 0, 0, 0, 18, 13, 133, 63, 34, 62, 246, 63, 0, 0, 0, 0, 104, 154, 179, 63, 66, 46, 198, 63, 0, 0, 0, 0, 85, 195, 156, 63, 200, 32, 210, 63, 0, 0, 0, 0, 100, 143, 229, 63, 184, 222, 196, 63, 0, 0, 0, 0, 4, 62, 192, 63, 60, 137, 205, 63, 0, 0, 0, 0, 228, 128, 187, 63, 247, 156, 144, 63, 0, 0, 0, 0, 190, 249, 255, 63, 34, 179, 156, 63, 0, 0, 0, 0, 164, 41, 203, 63, 74, 83, 236, 63, 0, 0, 0, 0, 93, 134, 187, 63, 150, 197, 182, 63, 0, 0, 0, 0, 246, 86, 144, 63, 46, 85, 182, 63, 0, 0, 0, 0, 213, 128, 144, 63, 225, 212, 237, 63, 0, 0, 0, 0, 156, 237, 249, 63, 220, 58, 195, 63, 0, 0, 0, 0, 67, 198, 159, 63, 108, 149, 184, 63, 0, 0, 0, 0, 74, 175, 154, 63, 74, 8, 255, 63, 0, 0, 0, 0, 201, 25, 161, 63, 152, 171, 195, 63, 0, 0, 0, 0, 253, 147, 176, 63, 125, 119, 249, 63, 0, 0, 0, 0, 88, 92, 154, 63, 180, 13, 249, 63, 0, 0, 0, 0, 209, 186, 205, 63, 248, 56, 140, 63, 0, 0, 0, 0, 73, 217, 182, 63, 230, 16, 201, 63, 0, 0, 0, 0, 247, 166, 237, 63, 119, 227, 181, 63, 0, 0, 0, 0, 149, 200, 242, 63, 237, 208, 198, 63, 0, 0, 0, 0, 110, 174, 187, 63, 142, 241, 248, 63, 0, 0, 0, 0, 107, 178, 160, 63, 60, 116, 134, 63, 0, 0, 0, 0, 153, 211, 254, 63, 145, 38, 233, 63, 0, 0, 0, 0, 92, 182, 147, 63, 253, 8, 139, 63, 0, 0, 0, 0, 212, 230, 180, 63, 10, 191, 228, 63, 0, 0, 0, 0, 10, 242, 232, 63, 238, 222, 203, 63, 0, 0, 0, 0, 64, 10, 204, 63, 82, 114, 241, 63, 0, 0, 0, 0, 192, 246, 233, 63, 242, 126, 182, 63, 0, 0, 0, 0, 8, 213, 148, 63, 26, 12, 236, 63, 0, 0, 0, 0, 72, 49, 150, 63, 188, 190, 157, 63, 0, 0, 0, 0, 250, 14, 219, 63, 79, 82, 200, 63, 0, 0, 0, 0, 83, 151, 183, 63, 172, 22, 229, 63, 0, 0, 0, 0, 235, 237, 215, 63, 27, 36, 179, 63, 0, 0, 0, 0, 80, 201, 193, 63, 88, 122, 165, 63, 0, 0, 0, 0, 92, 67, 180, 63, 241, 202, 247, 63, 0, 0, 0, 0, 218, 158, 220, 63, 247, 106, 181, 63, 0, 0, 0, 0, 146, 236, 224, 63, 241, 54, 156, 63, 0, 0, 0, 0, 166, 152, 237, 63, 74, 132, 231, 63, 0, 0, 0, 0, 228, 228, 207, 63, 26, 142, 168, 63, 0, 0, 0, 0, 180, 42, 241, 63, 136, 24, 192, 63, 0, 0, 0, 0, 118, 131, 240, 63, 32, 110, 129, 63, 0, 0, 0, 0, 29, 22, 243, 63, 246, 223, 245, 63, 0, 0, 0, 0, 60, 221, 225, 63, 104, 77, 144, 63, 0, 0, 0, 0, 165, 113, 180, 63, 80, 200, 245, 63, 0, 0, 0, 0, 28, 65, 178, 63, 232, 28, 139, 63, 0, 0, 0, 0, 240, 46, 129, 63, 52, 114, 238, 63, 0, 0, 0, 0, 174, 35, 128, 63, 75, 9, 220, 63, 0, 0, 0, 0, 133, 235, 1, 64, 205, 204, 204, 61, 132, 236, 13, 63, 157, 17, 213, 63, 251, 169, 241, 61, 141, 221, 198, 63, 103, 183, 174, 63, 238, 148, 14, 62, 183, 82, 252, 63, 120, 68, 143, 63, 24, 63, 40, 62, 79, 144, 67, 64, 104, 245, 106, 63, 227, 135, 70, 62, 17, 23, 26, 63, 131, 170, 64, 63, 47, 68, 106, 62, 44, 254, 130, 64, 118, 252, 29, 63, 151, 55, 138, 62, 134, 197, 195, 63, 117, 140, 1, 63, 162, 24, 163, 62, 94, 220, 187, 63, 182, 117, 212, 62, 27, 116, 192, 62, 135, 2, 145, 64, 144, 55, 174, 62, 91, 24, 227, 62, 134, 31, 104, 64, 164, 219, 142, 62, 115, 252, 5, 63, 173, 231, 79, 64, 126, 73, 106, 62, 135, 26, 30, 63, 98, 231, 101, 63, 139, 29, 64, 62, 241, 143, 58, 63, 38, 80, 91, 64, 221, 136, 29, 62, 187, 36, 92, 63, 135, 26, 140, 64, 171, 45, 1, 62, 120, 226, 129, 63, 14, 145, 244, 62, 66, 218, 211, 61, 141, 67, 153, 63, 167, 13, 224, 63, 23, 184, 173, 61, 243, 217, 180, 63, 92, 95, 152, 64, 29, 115, 142, 61, 147, 103, 213, 63, 31, 84, 42, 64, 16, 158, 105, 61, 66, 209, 251, 63, 232, 113, 249, 62, 249, 144, 63, 61, 128, 146, 20, 64, 169, 254, 133, 64, 153, 21, 29, 61, 182, 80, 47, 64, 40, 186, 149, 64, 38, 207, 0, 61, 59, 223, 78, 64, 238, 211, 72, 64, 62, 63, 211, 60, 229, 27, 116, 64, 4, 17, 78, 64, 251, 56, 173, 60, 55, 6, 144, 64, 114, 230, 202, 63, 226, 10, 142, 60, 218, 242, 169, 64, 155, 34, 146, 64, 32, 243, 104, 60, 21, 138, 200, 64, 97, 167, 149, 64, 206, 4, 63, 60, 240, 162, 236, 64, 216, 44, 67, 63, 169, 162, 28, 60, 146, 157, 11, 65, 179, 186, 89, 64, 231, 112, 0, 60, 13, 191, 36, 65, 255, 216, 3, 64, 173, 164, 210, 59, 143, 102, 66, 65, 45, 220, 144, 64, 60, 186, 172, 59, 138, 100, 101, 65, 150, 146, 152, 62, 244, 162, 141, 59, 122, 87, 135, 65, 211, 208, 135, 64, 174, 72, 104, 59, 5, 180, 159, 65, 250, 75, 116, 64, 9, 121, 62, 59, 35, 115, 188, 65, 38, 132, 239, 62, 13, 48, 28, 59, 231, 94, 222, 65, 164, 194, 75, 64, 236, 18, 0, 59, 223, 50, 3, 66, 158, 218, 134, 64, 140, 10, 210, 58, 130, 208, 26, 66, 151, 65, 187, 63, 217, 59, 172, 58, 91, 174, 54, 66, 13, 211, 32, 64, 82, 59, 141, 58, 75, 144, 87, 66, 99, 253, 41, 64, 184, 158, 103, 58, 119, 93, 126, 66, 231, 39, 134, 64, 171, 237, 61, 58, 78, 19, 150, 66, 215, 78, 153, 64, 196, 189, 27, 58, 199, 22, 177, 66, 236, 37, 37, 63, 107, 106, 255, 57, 8, 247, 208, 66, 255, 26, 42, 64, 221, 112, 209, 57, 35, 148, 246, 66, 129, 65, 79, 64, 212, 189, 171, 57, 61, 123, 17, 67, 82, 51, 96, 63, 251, 211, 140, 57, 5, 171, 43, 67, 186, 122, 23, 64, 62, 245, 102, 57, 123, 145, 74, 67, 188, 51, 20, 64, 179, 98, 61, 57, 211, 7, 111, 67, 119, 138, 130, 64, 208, 75, 27, 57, 45, 7, 141, 67, 231, 27, 31, 64, 137, 175, 254, 56, 191, 105, 166, 67, 215, 44, 147, 64, 158, 215, 208, 56, 15, 94, 196, 67, 194, 159, 221, 63, 42, 64, 171, 56, 170, 182, 231, 67, 58, 57, 155, 63, 240, 108, 140, 56, 3, 182, 8, 68, 230, 27, 25, 64, 65, 76, 102, 56, 167, 81, 33, 68, 3, 133, 233, 63, 33, 216, 60, 56, 58, 91, 62, 68, 101, 254, 33, 64, 47, 218, 26, 56, 216, 158, 96, 68, 201, 224, 245, 63, 46, 245, 253, 55, 173, 134, 132, 68, 164, 238, 186, 62, 207, 62, 208, 55, 122, 97, 156, 68, 37, 178, 146, 63, 221, 194, 170, 55, 128, 135, 184, 68, 14, 14, 80, 64, 48, 6, 140, 55, 155, 190, 217, 68, 96, 14, 8, 64, 191, 163, 101, 55, 35, 120, 0, 69, 105, 68, 98, 64, 243, 77, 60, 55, 0, 152, 23, 69, 45, 217, 18, 64, 226, 104, 26, 55, 112, 225, 50, 69, 58, 82, 10, 64, 93, 59, 253, 54, 64, 20, 83, 69, 248, 113, 64, 64),
"format": "RGBFloat",
"height": 2,
"mipmaps": false,
"width": 64
}

[sub_resource type="ImageTexture" id="ImageTexture_kxn0a"]
image = SubResource("Image_g538k")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_g538k"]
render_priority = 0
shader = ExtResource("3_kxn0a")
shader_parameter/wm = 0.99
shader_parameter/k = 1.0
shader_parameter/m = 25.01
shader_parameter/shiftClamp = Vector2(0.05, 0.9)
shader_parameter/size = Vector2(2000, 2000)
shader_parameter/epsilon = 1e-05
shader_parameter/time = 5372.05
shader_parameter/useGGX = false
shader_parameter/moments = Vector2(0.107676, 0.114765)
shader_parameter/wave_texture = SubResource("ImageTexture_kxn0a")
shader_parameter/waveCount = 64
shader_parameter/use_expsine = true
shader_parameter/useVertexShift = true
shader_parameter/amp_mod = 1.0
shader_parameter/cutoff_dist = 250.0
shader_parameter/cutoff_strength = 0.007
shader_parameter/water_color = Color(0.1, 0.17, 0.27, 1)

[sub_resource type="PlaneMesh" id="PlaneMesh_ho8b5"]
material = SubResource("ShaderMaterial_g538k")
size = Vector2(2000, 2000)
subdivide_width = 512
subdivide_depth = 512

[sub_resource type="ShaderMaterial" id="ShaderMaterial_p65mt"]
render_priority = 0
shader = ExtResource("4_g538k")
shader_parameter/wm = 0.99
shader_parameter/k = 1.0
shader_parameter/m = 10.0
shader_parameter/shiftClamp = Vector2(0.05, 0.78)
shader_parameter/size = Vector2(2000, 2000)
shader_parameter/epsilon = 1e-05
shader_parameter/useVertexShift = true

[sub_resource type="PanoramaSkyMaterial" id="PanoramaSkyMaterial_b6apv"]
panorama = ExtResource("4_ho8b5")

[sub_resource type="Sky" id="Sky_wa8c2"]
sky_material = SubResource("PanoramaSkyMaterial_b6apv")

[sub_resource type="Environment" id="Environment_6kuhc"]
background_mode = 2
sky = SubResource("Sky_wa8c2")
sky_rotation = Vector3(0, -2.00713, 0)
ambient_light_source = 3
ambient_light_color = Color(0.431282, 0.611583, 1, 1)
ambient_light_energy = 1.72
fog_light_energy = 0.66
fog_density = 0.0057
fog_aerial_perspective = 0.53
fog_sky_affect = 0.23
fog_depth_curve = 2.46228
fog_depth_begin = 0.0
fog_depth_end = 335.5

[node name="Node3D" type="Node3D"]

[node name="CanvasLayer" type="CanvasLayer" parent="."]
follow_viewport_enabled = true

[node name="Button" type="Button" parent="CanvasLayer"]
offset_right = 143.0
offset_bottom = 31.0
text = "Regenerate Mesh"

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(0.553392, -0.230982, 0.800253, 0, 0.96078, 0.277315, -0.832922, -0.153464, 0.531687, 0, 18.571, 0)
current = true
script = ExtResource("1_8adiu")

[node name="Water" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.00528717, 0.025815, -0.00992203)
mesh = SubResource("PlaneMesh_ho8b5")
script = ExtResource("2_g538k")
Time = 5372.05
_sumOfSinesMat = SubResource("ShaderMaterial_g538k")
_JONSWAPWaterMat = SubResource("ShaderMaterial_p65mt")
size = Vector2(2000, 2000)
subdivide = 512
waveCount = 64
baseAmplitude = 2.03

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_6kuhc")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="WorldEnvironment"]
transform = Transform3D(-0.419452, 0.351778, -0.836846, 0, 0.921863, 0.387515, 0.907778, 0.162544, -0.386677, -377.403, 55.3575, -64.6066)
light_energy = 2.0

[connection signal="pressed" from="CanvasLayer/Button" to="Water" method="RegenerateMesh"]
