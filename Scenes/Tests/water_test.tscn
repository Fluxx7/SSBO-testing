[gd_scene load_steps=14 format=3 uid="uid://c7j36bvqcqrso"]

[ext_resource type="Script" uid="uid://8560q4g3mplt" path="res://Custom/DensityTarget.cs" id="1_8adiu"]
[ext_resource type="Script" uid="uid://c4dvp1scoivp3" path="res://assets/Water.cs" id="2_g538k"]
[ext_resource type="Shader" uid="uid://cf6cwynfn2fdn" path="res://assets/Shaders/sum_of_sines_water.gdshader" id="3_kxn0a"]
[ext_resource type="Shader" uid="uid://ydttxe06jcko" path="res://assets/Shaders/jonswap_water.gdshader" id="4_g538k"]
[ext_resource type="Texture2D" uid="uid://bbjd3i76mo64e" path="res://assets/Textures/Epic_BlueSunset_EquiRect_flat.png" id="4_ho8b5"]

[sub_resource type="Image" id="Image_kxn0a"]
data = {
"data": PackedByteArray(0, 0, 128, 63, 0, 0, 0, 64, 0, 0, 0, 0, 173, 67, 143, 63, 42, 22, 255, 63, 0, 0, 0, 0, 163, 241, 252, 63, 180, 100, 72, 63, 0, 0, 0, 0, 120, 227, 104, 62, 122, 234, 186, 62, 0, 0, 0, 0, 44, 106, 162, 63, 106, 73, 251, 63, 0, 0, 0, 0, 204, 49, 193, 63, 188, 198, 14, 62, 0, 0, 0, 0, 56, 206, 108, 62, 34, 140, 184, 62, 0, 0, 0, 0, 192, 11, 129, 60, 73, 161, 150, 63, 0, 0, 0, 0, 84, 63, 98, 62, 18, 64, 208, 63, 0, 0, 0, 0, 168, 17, 225, 63, 177, 111, 211, 63, 0, 0, 0, 0, 18, 196, 173, 63, 208, 97, 135, 61, 0, 0, 0, 0, 80, 132, 190, 61, 110, 233, 181, 63, 0, 0, 0, 0, 189, 29, 245, 63, 154, 166, 179, 63, 0, 0, 0, 0, 234, 117, 126, 63, 0, 128, 151, 55, 0, 0, 0, 0, 0, 74, 138, 58, 217, 224, 133, 63, 0, 0, 0, 0, 191, 11, 227, 63, 101, 20, 209, 63, 0, 0, 0, 0, 138, 156, 212, 63, 36, 161, 127, 62, 0, 0, 0, 0, 48, 197, 0, 61, 115, 80, 64, 63, 0, 0, 0, 0, 44, 141, 12, 62, 234, 184, 192, 63, 0, 0, 0, 0, 39, 180, 253, 63, 248, 34, 152, 63, 0, 0, 0, 0, 70, 222, 175, 63, 16, 154, 148, 61, 0, 0, 0, 0, 92, 82, 165, 62, 4, 58, 135, 62, 0, 0, 0, 0, 156, 171, 49, 63, 110, 220, 249, 63, 0, 0, 0, 0, 15, 161, 165, 63, 14, 88, 250, 63, 0, 0, 0, 0, 67, 153, 122, 63, 0, 112, 105, 57, 0, 0, 0, 0, 173, 233, 30, 63, 168, 254, 152, 61, 0, 0, 0, 0, 95, 98, 64, 63, 36, 252, 251, 63, 0, 0, 0, 0, 67, 94, 219, 63, 172, 109, 153, 62, 0, 0, 0, 0, 232, 119, 186, 61, 20, 93, 181, 63, 0, 0, 0, 0, 255, 176, 130, 63, 194, 248, 255, 63, 0, 0, 0, 0, 66, 192, 244, 63, 144, 120, 180, 63, 0, 0, 0, 0, 246, 143, 254, 63, 52, 189, 89, 63, 0, 0, 0, 0, 174, 71, 129, 64, 41, 92, 143, 61, 51, 51, 35, 64, 23, 217, 78, 64, 50, 8, 172, 61, 191, 159, 46, 64, 121, 122, 37, 64, 61, 112, 206, 61, 3, 217, 58, 64, 251, 97, 4, 64, 227, 185, 247, 61, 83, 237, 71, 64, 248, 207, 211, 63, 188, 162, 20, 62, 5, 236, 85, 64, 45, 115, 169, 63, 226, 92, 50, 62, 129, 229, 100, 64, 87, 143, 135, 63, 16, 9, 86, 62, 85, 235, 116, 64, 88, 229, 88, 63, 215, 107, 128, 62, 37, 8, 131, 64, 71, 132, 45, 63, 2, 27, 154, 62, 61, 52, 140, 64, 57, 208, 10, 63, 54, 237, 184, 62, 178, 4, 150, 64, 245, 25, 222, 62, 117, 233, 221, 62, 7, 133, 160, 64, 94, 174, 177, 62, 173, 37, 5, 63, 139, 193, 171, 64, 24, 37, 142, 62, 208, 198, 31, 63, 106, 199, 183, 64, 141, 110, 99, 62, 96, 187, 63, 63, 188, 164, 196, 64, 11, 242, 53, 62, 13, 20, 102, 63, 151, 104, 210, 64, 111, 142, 17, 62, 8, 12, 138, 63, 29, 35, 225, 64, 229, 227, 232, 61, 10, 168, 165, 63, 147, 229, 240, 64, 235, 79, 186, 61, 166, 201, 198, 63, 57, 225, 0, 65, 188, 12, 149, 61, 149, 139, 238, 63, 192, 230, 9, 65, 199, 122, 110, 61, 141, 32, 15, 64, 242, 141, 19, 65, 159, 200, 62, 61, 170, 192, 43, 64, 32, 226, 29, 65, 127, 160, 24, 61, 102, 26, 78, 64, 101, 239, 40, 65, 255, 51, 244, 60, 225, 82, 119, 64, 183, 194, 52, 65, 204, 92, 195, 60, 238, 100, 148, 64, 243, 105, 65, 65, 61, 74, 156, 60, 184, 18, 178, 64, 238, 243, 78, 65, 98, 16, 122, 60, 17, 176, 213, 64, 135, 112, 93, 65, 27, 13, 72, 60, 113, 54, 0, 65, 186, 240, 108, 65, 124, 10, 32, 60, 238, 218, 25, 65, 179, 134, 125, 65, 99, 8, 0, 60, 81, 160, 56, 65, 242, 162, 135, 65, 56, 218, 204, 59, 47, 141, 93, 65, 142, 33, 145, 65, 199, 225, 163, 59, 80, 238, 132, 65, 78, 74, 155, 65, 6, 27, 131, 59, 96, 132, 159, 65, 28, 41, 166, 65),
"format": "RGBFloat",
"height": 2,
"mipmaps": false,
"width": 32
}

[sub_resource type="ImageTexture" id="ImageTexture_ho8b5"]
image = SubResource("Image_kxn0a")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_g538k"]
render_priority = 0
shader = ExtResource("3_kxn0a")
shader_parameter/wm = 0.99
shader_parameter/k = 1.0
shader_parameter/m = 25.01
shader_parameter/shiftClamp = Vector2(0.05, 0.9)
shader_parameter/epsilon = 1e-05
shader_parameter/size = Vector2(2000, 2000)
shader_parameter/time = 5805.16
shader_parameter/moments = Vector2(0.215847, 0.256795)
shader_parameter/wave_texture = SubResource("ImageTexture_ho8b5")
shader_parameter/waveCount = 32
shader_parameter/useGGX = false
shader_parameter/use_expsine = true
shader_parameter/useVertexShift = true
shader_parameter/roughness = 0.4
shader_parameter/amp_mod = 1.0
shader_parameter/cutoff_dist = 250.0
shader_parameter/cutoff_strength = 0.007
shader_parameter/water_scatter_color = Color(8.54321e-07, 0.471324, 0.118765, 1)
shader_parameter/air_bubble_color = Color(0.594635, 1, 0.911945, 1)
shader_parameter/water_color = Color(0.0216629, 0.187326, 0.313451, 1)
shader_parameter/k1 = 22.2
shader_parameter/k2 = 4.43
shader_parameter/k3 = 2.09
shader_parameter/k4 = 0.92
shader_parameter/air_bubble_density = 0.5

[sub_resource type="PlaneMesh" id="PlaneMesh_gsgjc"]
material = SubResource("ShaderMaterial_g538k")
size = Vector2(2000, 2000)
subdivide_width = 512
subdivide_depth = 512

[sub_resource type="ShaderMaterial" id="ShaderMaterial_p65mt"]
render_priority = 0
shader = ExtResource("4_g538k")
shader_parameter/wm = 0.99
shader_parameter/k = 1.0
shader_parameter/m = 10.0
shader_parameter/shiftClamp = Vector2(0.05, 0.78)
shader_parameter/epsilon = 1e-05
shader_parameter/size = Vector2(2000, 2000)
shader_parameter/useVertexShift = true

[sub_resource type="PanoramaSkyMaterial" id="PanoramaSkyMaterial_b6apv"]
panorama = ExtResource("4_ho8b5")

[sub_resource type="Sky" id="Sky_wa8c2"]
sky_material = SubResource("PanoramaSkyMaterial_b6apv")

[sub_resource type="Environment" id="Environment_6kuhc"]
background_mode = 2
sky = SubResource("Sky_wa8c2")
sky_rotation = Vector3(0, -2.00713, 0)
ambient_light_source = 3
ambient_light_color = Color(0.431282, 0.611583, 1, 1)
ambient_light_energy = 1.72
fog_light_energy = 0.66
fog_density = 0.0057
fog_sky_affect = 0.23
fog_depth_curve = 2.46228
fog_depth_begin = 0.0
fog_depth_end = 335.5

[node name="Node3D" type="Node3D"]

[node name="CanvasLayer" type="CanvasLayer" parent="."]
follow_viewport_enabled = true

[node name="Button" type="Button" parent="CanvasLayer"]
offset_right = 143.0
offset_bottom = 31.0
text = "Regenerate Mesh"

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(0.243615, -0.347571, 0.905453, 0, 0.933581, 0.358368, -0.969873, -0.0873039, 0.227434, 0, 17.421, 0)
current = true
script = ExtResource("1_8adiu")

[node name="Water" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.00528717, 0.025815, -0.00992203)
mesh = SubResource("PlaneMesh_gsgjc")
script = ExtResource("2_g538k")
Time = 5805.16
_sumOfSinesMat = SubResource("ShaderMaterial_g538k")
_JONSWAPWaterMat = SubResource("ShaderMaterial_p65mt")
size = Vector2(2000, 2000)
subdivide = 512
waveCount = 32
baseAmplitude = 4.04
baseFrequency = 0.07
gain = 1.2
lacunarity = 0.8
phase_modifier = 2.55

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_6kuhc")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="WorldEnvironment"]
transform = Transform3D(-0.390732, 0.269129, -0.880282, 0, 0.956304, 0.292371, 0.920506, 0.114239, -0.373658, 0, 6.89, 0)
light_energy = 1.8

[connection signal="pressed" from="CanvasLayer/Button" to="Water" method="RegenerateMesh"]
